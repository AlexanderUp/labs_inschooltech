# Тестовое задание на позицию стажёра-бэкендера (Python) (Inschooltech)

## Описание бизнес-процесса

Лаборатории при исследовательском центре отправляют результаты исследований в центральный офис – в день проводится около 100 исследований, при этом набор исследуемых показателей пока небольшой, в будущем этот набор планируют расширять.
Сотрудники центрального офиса видят результаты исследований через интерфейс веб-приложения.

## Задача

- Разработать сервис для работы с результатами исследований.
- Сервис должен уметь взаимодействовать с клиентом при помощи REST API.
- Потребитель API – фронтэнд-приложение.
- Информация о результатах исследований хранится в БД Сервиса.

### API методы
Метод получения результатов всех активных (не удалённых) завершённых исследований с фильтрацией по id лаборатории. Структура ответа:

```
{
    "id": "1019d05d-8683-4410-b4c1-01014ee99575",
    "lab_id": "1fc0e364-0fbb-4884-99ce-93e9d541dbfd",
    "duration_seconds": 360,
    "results": [
        {
            "id": "4f394168-b88b-404f-a1d6-9c710f9ad752",
            "score": "0.12345",
            "indicator_name": "способность к усвоению информации",
            "metric_name": "cкорость реакции",
            "metric_unit": "секунды",
            "is_within_normal_range": true,
        },
        {
            "id": "ad03ba61-6f67-4776-b61d-6557e27ab3c1",
            "score": "99.00000",
            "indicator_name": "cпособность к усвоению информации",
            "metric_name": "доля ошибок",
            "metric_unit": "%",
            "is_within_normal_range": false,
        },
		...
    ],
}
```

Пояснение к полям:
```
{
    "id": UUID - id исследования,
    "lab_id": UUID - id лаборатории,
    "duration_seconds": int - длительность исследования в секундах,
    "results": [
        {
            "id": UUID - id записи количественного результата (из таблицы scores),
            "score": str – значение количественного результата,
            "indicator_name": str - название показателя,
            "metric_name": str - название метрики,
            "metric_unit": str - единица измерения метрики,
            "is_within_normal_range": boolean - статус, показывающий находится ли значение метрики в коридоре нормальных значений или нет
        },
    		...
    ],
}
```

### Модели данных

Схемы БД представлены по ссылке - https://dbdiagram.io/d/65005bff02bd1c4a5e6bc60b.

- Одна лаборатория (labs) может провести одно/несколько исследований (tests).
- Один показатель (indicators) может состоять из одной/нескольких метрик (metrics).
- В рамках одного теста (tests) может измеряться один/несколько показателей-метрик (indicators_metrics).
- Каждый «показатель-метрика» имеет одно количественное значение (scores), полученное в результате конкретного исследования (tests).
- Каждый «показатель-метрика» имеет один коридор нормальных значений - (references).
- Поле is_active в каждой модели – служебное, внедрено для реализации soft delete в будущем.

### Пример, иллюстрирующий модели

Показатель «cпособность к усвоению информации» состоит из двух метрик: «скорость реакции» и «доля ошибок».
Лаборатория провела тест, в котором измерила этот показатель.
Результаты получились следующие:

| Показатель | Метрика | Количественное значение | Коридор нормальных значений (mix-max) |
| --- | --- | --- | --- |
| cпособность к усвоению информации | скорость реакции | 0.12345678 | 0.10 – 2.00 |
| cпособность к усвоению информации | доля ошибок | 99.0000012 | 20.00 – 35.00 |

### Допущения и дополнения

При проектировании и реализации Сервиса Вы можете применить любые допущения и дополнения, (например, дополнить модели, внедрить авторизацию, реализовать кэширование и тд.), однако все они должны описаны в README проекта с указанием обоснования использования.
Чем более детально продуман Сервис, тем лучше.

### Критерии приемки тестового задания

- Язык программирования: Python 3.10 и выше.
- Фреймворки: Django 4.2, Django Rest Framework 3.14.
- База данных: PostgreSQL 14 и выше.
- Написаны фунциональные тесты, проверяющие работу API эндпоинта.
- Приложение упаковано в docker compose.
- Репозиторий содержит README с описанием и инструкциями по запуску/настройке проекта.
- Исходный код Вашего решения выложен в публичном репозитории Github/Gitlab.

### Будет плюсом

- Код покрыт юнит-тестами (pytest) – только критичные функции, общее покрытие около 70%.
- Реализована swagger документация API.
- API эндпоинт закрыт авторизацией (метод аутентификации – на выбор).
- Подключен CI, запускающий проверки качества кода, типов, тесты и тд.
